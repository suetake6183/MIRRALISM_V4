# MIRRALISM_V4 - 人間関係分析システム

## プロジェクト概要
- **目的**: 末武さんの議事録や思考メモをClaude Codeが自律的に分析し、人間関係の洞察を提供するシステム
- **技術スタック**: Node.js + SQLite + Claude Code連携
- **設計書**: integrated-design-package.md準拠

## 重要な制約（必須遵守）
- **APIは使わない**（Claude Code内で直接分析）
- **非エンジニア向け**（エラーは日本語、操作は簡単）
- **段階的実装**（1日1機能）
- **JST時刻**（すべてのタイムスタンプは日本標準時）

## システムの流れ
1. inputフォルダにファイルを配置
2. AIがファイル種類を自動判別（meeting/personal/proposal）
3. **分析方法をAIが提案** ← 重要：現在未実装
4. **ユーザーが承認/修正** ← 重要：現在未実装
5. 分析実行・結果保存
6. **フィードバックで学習** ← 重要：現在未実装
7. ファイルを自動アーカイブ

## 🎯 Task Master AI による進捗管理
**重要：進捗管理と作業計画はTask Master AIを参照すること**

### 作業開始前の必須手順
1. **Task Master AIで次のタスク確認**: `next_task`機能で優先タスクを特定
2. **詳細な実装計画確認**: 各タスクのサブタスクで具体的な実装手順を確認
3. **依存関係の確認**: 前提タスクが完了していることを確認

### 実装中の記録
- **作業ログ記録**: 実装中の気づきは`update_subtask`で詳細に記録
- **方針変更時の調整**: `update_task`で実装方針の変更を反映

### 完了処理
- **テスト実行**: タスクの`testStrategy`に基づいて検証
- **ステータス更新**: `set_task_status`で完了状態に変更

## 開発コマンド
- `npm run analyze`: 分析実行
- `npm run init-db`: データベース初期化

## データベース構造
- `database/learning.db`: 学習パターン保存
- `database/profiles.db`: 人物プロファイル
- `database/archive-index.db`: アーカイブインデックス

## ⚠️ Claude Code への重要指示
**Task Master AIが全ての作業管理を行います：**

1. **作業開始前**: Task Master AIで次のタスクを確認
2. **作業中**: サブタスクの実装手順に従い、進捗を記録
3. **作業完了**: Task Master AIでステータス更新

**このCLAUDE.mdは概要把握のみ。詳細はTask Master AIを参照すること。**

## ファイル作成・編集ルール
### 改行コード
- ファイルの終端は必ずLF（\n）にする
- 既に終端がLFの場合は追加しない

### フォーマット
- 空白だけの行は改行文字のみにする
- 文章の末尾の空白は削除する
- 行末に不要な空白文字を残さない 